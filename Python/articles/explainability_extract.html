<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Thompson Sampling" href="thompsonsampling.html" /><link rel="prev" title="Data Anonymization" href="Example_Data_Anonymization.html" />

    <link rel="shortcut icon" href="../_static/pegasystems-inc-vector-logo.svg"/><!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>Explainability Extract Analysis - pdstools</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

</head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">pdstools</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/pegasystems-inc-vector-logo.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">pdstools</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pegasystems/pega-datascientist-tools/wiki#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pegasystems/pega-datascientist-tools/wiki">Getting Started</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pegasystems/pega-datascientist-tools/wiki/ADM-Health-Check">ADM Health Check</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Example_ADM_Analysis.html">Example ADM analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADMBinningInsights.html">Insights from ADM Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="AGBModelVisualisation.html">Analyzing ADM AGB models</a></li>
<li class="toctree-l1"><a class="reference internal" href="vf_analysis.html">Value Finder analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Example_Data_Anonymization.html">Data Anonymization</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Explainability Extract Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Articles</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="thompsonsampling.html">Thompson Sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADMExplained.html">ADM Explained</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Information</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference.html">Additional References</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Additional References</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="pdstoolsv3.html">pdstools version 3: Polars</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/pegasystems/pega-datascientist-tools/releases">Changelog</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/pegasystems/pega-datascientist-tools">GitHub Repository</a></li>
<li class="toctree-l2"><a class="reference external" href="https://pegasystems.github.io/pega-datascientist-tools/R/index.html">R Documentation</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../autoapi/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../autoapi/pdstools/index.html">pdstools</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of pdstools</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/adm/index.html">pdstools.adm</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of pdstools.adm</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/adm/ADMDatamart/index.html">pdstools.adm.ADMDatamart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/adm/ADMTrees/index.html">pdstools.adm.ADMTrees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/adm/BinAggregator/index.html">pdstools.adm.BinAggregator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/adm/Tables/index.html">pdstools.adm.Tables</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/app/index.html">pdstools.app</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of pdstools.app</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/pdstools/app/decision_analyzer/index.html">pdstools.app.decision_analyzer</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of pdstools.app.decision_analyzer</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/pdstools/app/decision_analyzer/Home/index.html">pdstools.app.decision_analyzer.Home</a></li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/pdstools/app/decision_analyzer/da_streamlit_utils/index.html">pdstools.app.decision_analyzer.da_streamlit_utils</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../autoapi/pdstools/app/health_check/index.html">pdstools.app.health_check</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of pdstools.app.health_check</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../autoapi/pdstools/app/health_check/pages/index.html">pdstools.app.health_check.pages</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of pdstools.app.health_check.pages</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/pdstools/app/health_check/pages/1-data_import/index.html">pdstools.app.health_check.pages.1-data_import</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/pdstools/app/health_check/pages/2-data_filters/index.html">pdstools.app.health_check.pages.2-data_filters</a></li>
<li class="toctree-l6"><a class="reference internal" href="../autoapi/pdstools/app/health_check/pages/3-Reports/index.html">pdstools.app.health_check.pages.3-Reports</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../autoapi/pdstools/app/health_check/Home/index.html">pdstools.app.health_check.Home</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/app/cli/index.html">pdstools.app.cli</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/decision_analyzer/index.html">pdstools.decision_analyzer</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of pdstools.decision_analyzer</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/decision_analyzer/data_read_utils/index.html">pdstools.decision_analyzer.data_read_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/decision_analyzer/decision_data/index.html">pdstools.decision_analyzer.decision_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/decision_analyzer/plots/index.html">pdstools.decision_analyzer.plots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/decision_analyzer/table_definition/index.html">pdstools.decision_analyzer.table_definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/decision_analyzer/utils/index.html">pdstools.decision_analyzer.utils</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/ih/index.html">pdstools.ih</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of pdstools.ih</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/ih/IHAnalysis/index.html">pdstools.ih.IHAnalysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/ih/legacy_IH/index.html">pdstools.ih.legacy_IH</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/pega_io/index.html">pdstools.pega_io</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of pdstools.pega_io</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/pega_io/API/index.html">pdstools.pega_io.API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/pega_io/File/index.html">pdstools.pega_io.File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/pega_io/S3/index.html">pdstools.pega_io.S3</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/plots/index.html">pdstools.plots</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of pdstools.plots</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/plots/plot_base/index.html">pdstools.plots.plot_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/plots/plots_plotly/index.html">pdstools.plots.plots_plotly</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/prediction/index.html">pdstools.prediction</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of pdstools.prediction</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/prediction/Prediction/index.html">pdstools.prediction.Prediction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/pdstools/reports/index.html">pdstools.reports</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/utils/index.html">pdstools.utils</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of pdstools.utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/CDHLimits/index.html">pdstools.utils.CDHLimits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/NBAD/index.html">pdstools.utils.NBAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/cdh_utils/index.html">pdstools.utils.cdh_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/datasets/index.html">pdstools.utils.datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/errors/index.html">pdstools.utils.errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/hds_utils/index.html">pdstools.utils.hds_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/hds_utils_experimental/index.html">pdstools.utils.hds_utils_experimental</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/pega_template/index.html">pdstools.utils.pega_template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/polars_ext/index.html">pdstools.utils.polars_ext</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/show_versions/index.html">pdstools.utils.show_versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/streamlit_utils/index.html">pdstools.utils.streamlit_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/table_definitions/index.html">pdstools.utils.table_definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/utils/types/index.html">pdstools.utils.types</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../autoapi/pdstools/valuefinder/index.html">pdstools.valuefinder</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of pdstools.valuefinder</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/pdstools/valuefinder/ValueFinder/index.html">pdstools.valuefinder.ValueFinder</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/4-action_funnel/index.html">4-action_funnel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/1-global_filters/index.html">1-global_filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/12-Impact%20Analysis/index.html">12-Impact Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/2-global_dashboard/index.html">2-global_dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/6-win_loss_analysis/index.html">6-win_loss_analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/5-global_sensitivity/index.html">5-global_sensitivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/3-action_distribution/index.html">3-action_distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/9-Thresholding%20Analysis/index.html">9-Thresholding Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/8-offer_quality_analysis/index.html">8-offer_quality_analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/11-Business%20Lever%20Analysis/index.html">11-Business Lever Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/10-Business%20Value%20Analysis/index.html">10-Business Value Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/7-personalization_analysis/index.html">7-personalization_analysis</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/articles/explainability_extract.ipynb.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="Explainability-Extract-Analysis">
<h1>Explainability Extract Analysis<a class="headerlink" href="#Explainability-Extract-Analysis" title="Link to this heading">¶</a></h1>
<p><strong>Pega</strong></p>
<p><strong>2024-06-11</strong></p>
<p>Welcome to the Explainability Extract Demo. This notebook is designed to guide you through the analysis of Explainability Extract data using the DecisionData class of pdstools library. At this point, the dataset is particularly targeted on the “Arbitration” stage, but we have intentions to widen the data scope in subsequent iterations.</p>
<p>We developed this notebook with a dual purpose. Firstly, we aim to familiarize you with the various functions and visualizations available in the DecisionData class. You’ll learn how to aggregate and visualize data in ways that are meaningful and insightful for your specific use cases.</p>
<p>Secondly, we hope this notebook will inspire you. The analysis and visualizations demonstrated here are only the tip of the iceberg. We encourage you to think creatively and explore other ways this data can be utilized. Consider this notebook a springboard for your analysis journey.</p>
<p>Each data point represents a decision made in real-time, providing a snapshot of the arbitration process. By examining this data, you have the opportunity to delve into the intricacies of these decisions, gaining a deeper understanding of the decision-making process.</p>
<p>As you navigate through this notebook, remember that it is interactive. This means you can not only run each code cell to see the results but also tweak the code and experiment as you go along.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pdstools</span> <span class="kn">import</span> <span class="n">DecisionData</span><span class="p">,</span> <span class="n">readDSExport</span>
<span class="kn">import</span> <span class="nn">polars</span> <span class="k">as</span> <span class="nn">pl</span>
</pre></div>
</div>
</div>
<section id="Read-the-Data-and-create-DecisionData-instance">
<h2>Read the Data and create DecisionData instance<a class="headerlink" href="#Read-the-Data-and-create-DecisionData-instance" title="Link to this heading">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">readDSExport</span><span class="p">(</span>
    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;sample_explainability_extract.parquet&quot;</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="s2">&quot;https://raw.githubusercontent.com/pegasystems/pega-datascientist-tools/explainability/data&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">decision_data</span> <span class="o">=</span> <span class="n">DecisionData</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">lazy</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ValueError</span>                                Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[3], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> df <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">readDSExport</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">filename</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">sample_explainability_extract.parquet</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">path</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">https://raw.githubusercontent.com/pegasystems/pega-datascientist-tools/explainability/data</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> decision_data <span style="color: rgb(98,98,98)">=</span> DecisionData(df<span style="color: rgb(98,98,98)">.</span>lazy())

File <span class="ansi-green-fg">~/work/pega-datascientist-tools/pega-datascientist-tools/python/docs/source/articles/../../../pdstools/pega_io/File.py:132</span>, in <span class="ansi-cyan-fg">readDSExport</span><span class="ansi-blue-fg">(filename, path, verbose, **reading_opts)</span>
<span class="ansi-green-intense-fg ansi-bold">    128</span>     name, extension <span style="color: rgb(98,98,98)">=</span> os<span style="color: rgb(98,98,98)">.</span>path<span style="color: rgb(98,98,98)">.</span>splitext(file)
<span class="ansi-green-intense-fg ansi-bold">    130</span> <span style="color: rgb(95,135,135)"># Now we should either have a full path to a file, or a</span>
<span class="ansi-green-intense-fg ansi-bold">    131</span> <span style="color: rgb(95,135,135)"># BytesIO wrapper around the file. Polars can read those both.</span>
<span class="ansi-green-fg">--&gt; 132</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">import_file</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">file</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">extension</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">*</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">*</span><span class="ansi-yellow-bg">reading_opts</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/work/pega-datascientist-tools/pega-datascientist-tools/python/docs/source/articles/../../../pdstools/pega_io/File.py:215</span>, in <span class="ansi-cyan-fg">import_file</span><span class="ansi-blue-fg">(file, extension, **reading_opts)</span>
<span class="ansi-green-intense-fg ansi-bold">    212</span>         file <span style="color: rgb(98,98,98)">=</span> pl<span style="color: rgb(98,98,98)">.</span>scan_ipc(file)
<span class="ansi-green-intense-fg ansi-bold">    214</span> <span class="ansi-bold" style="color: rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">--&gt; 215</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> <span class="ansi-bold" style="color: rgb(215,95,95)">ValueError</span>(<span style="color: rgb(175,0,0)">f</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Could not import file: </span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span>file<span class="ansi-bold" style="color: rgb(175,95,135)">}</span><span style="color: rgb(175,0,0)">, with extension </span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span>extension<span class="ansi-bold" style="color: rgb(175,95,135)">}</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">    217</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> file

<span class="ansi-red-fg">ValueError</span>: Could not import file: Target not found, with extension
</pre></div></div>
</div>
</section>
<section id="Overview">
<h2>Overview<a class="headerlink" href="#Overview" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">get_overview_stats</span></code> property of <code class="docutils literal notranslate"><span class="pre">DecisionData</span></code> shows general statistics of the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">decision_data</span><span class="o">.</span><span class="n">get_overview_stats</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[4], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>get_overview_stats

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
<p>Lets take a look at 1 decision. From the height of the dataframe you can see how many actions are available at the Arbitration Stage for this interaction of a customer. <code class="docutils literal notranslate"><span class="pre">pxRank</span></code> column shows the ranks of actions in the arbitration.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">selected_interaction_id</span> <span class="o">=</span> <span class="n">decision_data</span><span class="o">.</span><span class="n">unfiltered_raw_decision_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;pxInteractionID&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">selected_interaction_id</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">decision_data</span><span class="o">.</span><span class="n">unfiltered_raw_decision_data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;pxInteractionID&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">selected_interaction_id</span>
<span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;pxRank&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[5], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> selected_interaction_id <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>unfiltered_raw_decision_data<span style="color: rgb(98,98,98)">.</span>select(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pxInteractionID</span><span style="color: rgb(175,0,0)">&#34;</span>)<span style="color: rgb(98,98,98)">.</span>first()<span style="color: rgb(98,98,98)">.</span>collect()<span style="color: rgb(98,98,98)">.</span>row(<span style="color: rgb(98,98,98)">0</span>)[<span style="color: rgb(98,98,98)">0</span>]
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(0,135,0)">print</span>(<span style="color: rgb(175,0,0)">f</span><span style="color: rgb(175,0,0)">&#34;</span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span>selected_interaction_id<span class="ansi-bold" style="color: rgb(175,95,135)">=}</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">      3</span> decision_data<span style="color: rgb(98,98,98)">.</span>unfiltered_raw_decision_data<span style="color: rgb(98,98,98)">.</span>filter(
<span class="ansi-green-intense-fg ansi-bold">      4</span>     pl<span style="color: rgb(98,98,98)">.</span>col(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pxInteractionID</span><span style="color: rgb(175,0,0)">&#34;</span>) <span style="color: rgb(98,98,98)">==</span> selected_interaction_id
<span class="ansi-green-intense-fg ansi-bold">      5</span> )<span style="color: rgb(98,98,98)">.</span>sort(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pxRank</span><span style="color: rgb(175,0,0)">&#34;</span>)<span style="color: rgb(98,98,98)">.</span>collect()

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Action-Distribution">
<h2>Action Distribution<a class="headerlink" href="#Action-Distribution" title="Link to this heading">¶</a></h2>
<p>Shows the overall distribution of actions at the Arbitration Stage. One can detect if a group of actions survive rarely until Arbitration.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stage</span> <span class="o">=</span> <span class="s2">&quot;Arbitration&quot;</span>
<span class="n">scope_options</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;pyIssue&quot;</span><span class="p">,</span> <span class="s2">&quot;pyGroup&quot;</span><span class="p">,</span> <span class="s2">&quot;pyName&quot;</span><span class="p">]</span>
<span class="n">distribution_data</span> <span class="o">=</span> <span class="n">decision_data</span><span class="o">.</span><span class="n">getDistributionData</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">scope_options</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_distribution_as_treemap</span><span class="p">(</span>
    <span class="n">df</span><span class="o">=</span><span class="n">distribution_data</span><span class="p">,</span> <span class="n">stage</span><span class="o">=</span><span class="n">stage</span><span class="p">,</span> <span class="n">scope_options</span><span class="o">=</span><span class="n">scope_options</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[6], line 3</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> stage <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Arbitration</span><span style="color: rgb(175,0,0)">&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> scope_options <span style="color: rgb(98,98,98)">=</span> [<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyIssue</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyGroup</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyName</span><span style="color: rgb(175,0,0)">&#34;</span>]
<span class="ansi-green-fg">----&gt; 3</span> distribution_data <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>getDistributionData(stage, scope_options)
<span class="ansi-green-intense-fg ansi-bold">      4</span> fig <span style="color: rgb(98,98,98)">=</span> decision_data<span style="color: rgb(98,98,98)">.</span>plot<span style="color: rgb(98,98,98)">.</span>plot_distribution_as_treemap(
<span class="ansi-green-intense-fg ansi-bold">      5</span>     df<span style="color: rgb(98,98,98)">=</span>distribution_data, stage<span style="color: rgb(98,98,98)">=</span>stage, scope_options<span style="color: rgb(98,98,98)">=</span>scope_options
<span class="ansi-green-intense-fg ansi-bold">      6</span> )
<span class="ansi-green-intense-fg ansi-bold">      7</span> fig<span style="color: rgb(98,98,98)">.</span>show()

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Global-Sensitivity">
<h2>Global Sensitivity<a class="headerlink" href="#Global-Sensitivity" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">The Global Sensitivity chart helps us understand how the 4 Arbitration factors propensity, value, levers, and context weights together affect the decision-making process.</div>
<div class="line"><strong>Sensitivity</strong> refers to the impact on our top actions if one of these factors is omitted. The percentages indicate the potential change in our final decisions due to the absence of each factor.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><strong>X-Axis (Decisions)</strong>: Represents the number of decisions affected by the exclusion of each factor.</div>
</div>
</li>
<li><p><strong>Y-Axis (Prioritization Factor)</strong>: Lists the Arbitration formula components.</p></li>
<li><p><strong>Bars</strong>: Each bar represents the percentage of decisions affected by the absence of the corresponding factor.</p></li>
<li><p>By identifying the most impactful factors, stakeholders can make strategic adjustments to enhance decision-making accuracy.</p></li>
<li><p>It highlights which factors need more attention or refinement. For instance, if “Levers” were to show a significant percentage, it would indicate a need for closer examination and potential improvement.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_sensitivity</span><span class="p">(</span><span class="n">win_rank</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[7], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>plot<span style="color: rgb(98,98,98)">.</span>plot_sensitivity(win_rank<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">1</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Wins-and-Losses-in-Arbitration">
<h2>Wins and Losses in Arbitration<a class="headerlink" href="#Wins-and-Losses-in-Arbitration" title="Link to this heading">¶</a></h2>
<p>Displays the distribution of wins and losses for different “Issues” in the arbitration stage. You can change the level to “Group” or “Action”. Based on the <code class="docutils literal notranslate"><span class="pre">win_rank</span></code> actions are classified as either winning or losing.</p>
<div class="line-block">
<div class="line"><strong>X-Axis (Percentage)</strong>: Represents the percentage of actions that are either wins or losses.</div>
<div class="line"><strong>Y-Axis (Status)</strong>: Differentiates between wins and losses.</div>
<div class="line"><strong>Color Legend (Issue)</strong>: Each color represents a different issue category, such as “Retention,” “Service,” “Growth,” etc.</div>
</div>
<section id="How-to-Interpret-the-Visual:">
<h3>How to Interpret the Visual:<a class="headerlink" href="#How-to-Interpret-the-Visual:" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Dominant Issues</strong>: The length of the bars helps identify which issues have the highest and lowest win and loss percentages. For example, if “Retention” has a longer bar in the Wins section, it indicates a higher percentage of winning actions for that issue.</p></li>
<li><p><strong>Comparative Analysis</strong>: By comparing the bars, you can quickly see which issues are performing better in terms of winning in arbitration and which are underperforming.</p></li>
<li><p><strong>Resource Allocation</strong>: By understanding which issues have higher loss percentages, resources can be reallocated to improve strategies in those areas.</p></li>
<li><p><strong>Decision-Making</strong>: Provides a clear visual representation of how decisions are distributed across different issues, aiding in making data-driven decisions for future actions.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_global_winloss_distribution</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">&quot;pyIssue&quot;</span><span class="p">,</span> <span class="n">win_rank</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[8], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>plot<span style="color: rgb(98,98,98)">.</span>plot_global_winloss_distribution(level<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyIssue</span><span style="color: rgb(175,0,0)">&#34;</span>, win_rank<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">1</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
</section>
<section id="Personalization-Analysis">
<h2>Personalization Analysis<a class="headerlink" href="#Personalization-Analysis" title="Link to this heading">¶</a></h2>
<p>The Personalization Analysis chart helps us understand the availability of options to present to customers during the arbitration stage. If only a limited number of actions survive to this stage, it becomes challenging to personalize offers effectively. Some customers may have only one action available, limiting the ability of our machine learning algorithm to arbitrate effectively.</p>
<p>In the chart:</p>
<p>The x-axis represents the number of actions available per customer. The left y-axis shows the number of decisions. The right y-axis shows the propensity percentage.</p>
<p>The bars (Optionality) indicate the number of decisions where customers had a specific number of actions available. For instance, a high bar at “2” means many customers had exactly two actions available in arbitration. The line (Propensity) represents the average propensity of the top-ranking actions within each bin.</p>
<p>This analysis helps in understanding the distribution of available actions. We expect the average propensity to increase as the number of available actions increase. If there are many customers with little or no actions available, it should be investigated</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_propensity_vs_optionality</span><span class="p">(</span><span class="n">stage</span><span class="o">=</span><span class="s2">&quot;Arbitration&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[9], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>plot<span style="color: rgb(98,98,98)">.</span>plot_propensity_vs_optionality(stage<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Arbitration</span><span style="color: rgb(175,0,0)">&#34;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Win/Loss-Analysis">
<h2>Win/Loss Analysis<a class="headerlink" href="#Win/Loss-Analysis" title="Link to this heading">¶</a></h2>
<section id="Win-Analysis">
<h3>Win Analysis<a class="headerlink" href="#Win-Analysis" title="Link to this heading">¶</a></h3>
<p>Let’s select an action to determine how often it wins and identify which actions it defeats in arbitration.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">win_rank</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">selected_action</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">decision_data</span><span class="o">.</span><span class="n">unfiltered_raw_decision_data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;pxRank&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;pyName&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">len</span><span class="p">()</span>
    <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;len&quot;</span><span class="p">,</span> <span class="n">descending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="o">.</span><span class="n">get_column</span><span class="p">(</span><span class="s2">&quot;pyName&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">to_list</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">filter_statement</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;pyName&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">selected_action</span>

<span class="n">interactions_where_comparison_group_wins</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">decision_data</span><span class="o">.</span><span class="n">get_winning_or_losing_interactions</span><span class="p">(</span>
        <span class="n">win_rank</span><span class="o">=</span><span class="n">win_rank</span><span class="p">,</span>
        <span class="n">group_filter</span><span class="o">=</span><span class="n">filter_statement</span><span class="p">,</span>
        <span class="n">win</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;selected action &#39;</span><span class="si">{</span><span class="n">selected_action</span><span class="si">}</span><span class="s2">&#39; wins(Rank</span><span class="si">{</span><span class="n">win_rank</span><span class="si">}</span><span class="s2">) in </span><span class="si">{</span><span class="n">interactions_where_comparison_group_wins</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="si">}</span><span class="s2"> interactions.&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[10], line 3</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> win_rank <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(98,98,98)">1</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> selected_action <span style="color: rgb(98,98,98)">=</span> (
<span class="ansi-green-fg">----&gt; 3</span>     <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>unfiltered_raw_decision_data<span style="color: rgb(98,98,98)">.</span>filter(pl<span style="color: rgb(98,98,98)">.</span>col(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pxRank</span><span style="color: rgb(175,0,0)">&#34;</span>) <span style="color: rgb(98,98,98)">==</span> <span style="color: rgb(98,98,98)">1</span>)
<span class="ansi-green-intense-fg ansi-bold">      4</span>     <span style="color: rgb(98,98,98)">.</span>group_by(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyName</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span style="color: rgb(98,98,98)">.</span>len()
<span class="ansi-green-intense-fg ansi-bold">      6</span>     <span style="color: rgb(98,98,98)">.</span>sort(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">len</span><span style="color: rgb(175,0,0)">&#34;</span>, descending<span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">True</span>)
<span class="ansi-green-intense-fg ansi-bold">      7</span>     <span style="color: rgb(98,98,98)">.</span>collect()
<span class="ansi-green-intense-fg ansi-bold">      8</span>     <span style="color: rgb(98,98,98)">.</span>get_column(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyName</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">      9</span>     <span style="color: rgb(98,98,98)">.</span>to_list()[<span style="color: rgb(98,98,98)">1</span>]
<span class="ansi-green-intense-fg ansi-bold">     10</span> )
<span class="ansi-green-intense-fg ansi-bold">     11</span> filter_statement <span style="color: rgb(98,98,98)">=</span> pl<span style="color: rgb(98,98,98)">.</span>col(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyName</span><span style="color: rgb(175,0,0)">&#34;</span>) <span style="color: rgb(98,98,98)">==</span> selected_action
<span class="ansi-green-intense-fg ansi-bold">     13</span> interactions_where_comparison_group_wins <span style="color: rgb(98,98,98)">=</span> (
<span class="ansi-green-intense-fg ansi-bold">     14</span>     decision_data<span style="color: rgb(98,98,98)">.</span>get_winning_or_losing_interactions(
<span class="ansi-green-intense-fg ansi-bold">     15</span>         win_rank<span style="color: rgb(98,98,98)">=</span>win_rank,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">     18</span>     )
<span class="ansi-green-intense-fg ansi-bold">     19</span> )

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
<p>Graph below shows the competing actions going into arbitration together with the selected action and how many times they lose. It highlights which actions are being surpassed by the chosen action.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Losing actions in interactions where the selected action wins.</span>
<span class="n">groupby_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;pyIssue&quot;</span><span class="p">,</span> <span class="s2">&quot;pyGroup&quot;</span><span class="p">,</span> <span class="s2">&quot;pyName&quot;</span><span class="p">]</span>
<span class="n">winning_from</span> <span class="o">=</span> <span class="n">decision_data</span><span class="o">.</span><span class="n">winning_from</span><span class="p">(</span>
    <span class="n">interactions</span><span class="o">=</span><span class="n">interactions_where_comparison_group_wins</span><span class="p">,</span>
    <span class="n">win_rank</span><span class="o">=</span><span class="n">win_rank</span><span class="p">,</span>
    <span class="n">groupby_cols</span><span class="o">=</span><span class="n">groupby_cols</span><span class="p">,</span>
    <span class="n">top_k</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_distribution_as_treemap</span><span class="p">(</span>
    <span class="n">df</span><span class="o">=</span><span class="n">winning_from</span><span class="p">,</span> <span class="n">stage</span><span class="o">=</span><span class="s2">&quot;Arbitration&quot;</span><span class="p">,</span> <span class="n">scope_options</span><span class="o">=</span><span class="n">groupby_cols</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[11], line 3</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span style="color: rgb(95,135,135)"># Losing actions in interactions where the selected action wins.</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> groupby_cols <span style="color: rgb(98,98,98)">=</span> [<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyIssue</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyGroup</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyName</span><span style="color: rgb(175,0,0)">&#34;</span>]
<span class="ansi-green-fg">----&gt; 3</span> winning_from <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>winning_from(
<span class="ansi-green-intense-fg ansi-bold">      4</span>     interactions<span style="color: rgb(98,98,98)">=</span>interactions_where_comparison_group_wins,
<span class="ansi-green-intense-fg ansi-bold">      5</span>     win_rank<span style="color: rgb(98,98,98)">=</span>win_rank,
<span class="ansi-green-intense-fg ansi-bold">      6</span>     groupby_cols<span style="color: rgb(98,98,98)">=</span>groupby_cols,
<span class="ansi-green-intense-fg ansi-bold">      7</span>     top_k<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">20</span>,
<span class="ansi-green-intense-fg ansi-bold">      8</span> )
<span class="ansi-green-intense-fg ansi-bold">     10</span> decision_data<span style="color: rgb(98,98,98)">.</span>plot<span style="color: rgb(98,98,98)">.</span>plot_distribution_as_treemap(
<span class="ansi-green-intense-fg ansi-bold">     11</span>     df<span style="color: rgb(98,98,98)">=</span>winning_from, stage<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Arbitration</span><span style="color: rgb(175,0,0)">&#34;</span>, scope_options<span style="color: rgb(98,98,98)">=</span>groupby_cols
<span class="ansi-green-intense-fg ansi-bold">     12</span> )

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Loss-Analysis">
<h3>Loss Analysis<a class="headerlink" href="#Loss-Analysis" title="Link to this heading">¶</a></h3>
<p>Let’s analyze which actions come out on top when the selected action fails</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">interactions_where_comparison_group_loses</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">decision_data</span><span class="o">.</span><span class="n">get_winning_or_losing_interactions</span><span class="p">(</span>
        <span class="n">win_rank</span><span class="o">=</span><span class="n">win_rank</span><span class="p">,</span>
        <span class="n">group_filter</span><span class="o">=</span><span class="n">filter_statement</span><span class="p">,</span>
        <span class="n">win</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;selected action &#39;</span><span class="si">{</span><span class="n">selected_action</span><span class="si">}</span><span class="s2">&#39; loses in </span><span class="si">{</span><span class="n">interactions_where_comparison_group_loses</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="si">}</span><span class="s2"> interactions.&quot;</span>
<span class="p">)</span>
<span class="c1"># Winning actions in interactions where the selected action loses.</span>
<span class="n">losing_to</span> <span class="o">=</span> <span class="n">decision_data</span><span class="o">.</span><span class="n">winning_from</span><span class="p">(</span>
    <span class="n">interactions</span><span class="o">=</span><span class="n">interactions_where_comparison_group_loses</span><span class="p">,</span>
    <span class="n">win_rank</span><span class="o">=</span><span class="n">win_rank</span><span class="p">,</span>
    <span class="n">groupby_cols</span><span class="o">=</span><span class="n">groupby_cols</span><span class="p">,</span>
    <span class="n">top_k</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_distribution_as_treemap</span><span class="p">(</span>
    <span class="n">df</span><span class="o">=</span><span class="n">losing_to</span><span class="p">,</span> <span class="n">stage</span><span class="o">=</span><span class="s2">&quot;Arbitration&quot;</span><span class="p">,</span> <span class="n">scope_options</span><span class="o">=</span><span class="n">groupby_cols</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[12], line 2</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> interactions_where_comparison_group_loses <span style="color: rgb(98,98,98)">=</span> (
<span class="ansi-green-fg">----&gt; 2</span>     <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>get_winning_or_losing_interactions(
<span class="ansi-green-intense-fg ansi-bold">      3</span>         win_rank<span style="color: rgb(98,98,98)">=</span>win_rank,
<span class="ansi-green-intense-fg ansi-bold">      4</span>         group_filter<span style="color: rgb(98,98,98)">=</span>filter_statement,
<span class="ansi-green-intense-fg ansi-bold">      5</span>         win<span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">False</span>,
<span class="ansi-green-intense-fg ansi-bold">      6</span>     )
<span class="ansi-green-intense-fg ansi-bold">      7</span> )
<span class="ansi-green-intense-fg ansi-bold">      9</span> <span style="color: rgb(0,135,0)">print</span>(
<span class="ansi-green-intense-fg ansi-bold">     10</span>     <span style="color: rgb(175,0,0)">f</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">selected action </span><span style="color: rgb(175,0,0)">&#39;</span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span>selected_action<span class="ansi-bold" style="color: rgb(175,95,135)">}</span><span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)"> loses in </span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span>interactions_where_comparison_group_loses<span style="color: rgb(98,98,98)">.</span>collect()<span style="color: rgb(98,98,98)">.</span>height<span class="ansi-bold" style="color: rgb(175,95,135)">}</span><span style="color: rgb(175,0,0)"> interactions.</span><span style="color: rgb(175,0,0)">&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span> )
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span style="color: rgb(95,135,135)"># Winning actions in interactions where the selected action loses.</span>

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="What-are-the-Prioritization-Factors-that-make-these-actions-win-or-lose?">
<h3>What are the Prioritization Factors that make these actions win or lose?<a class="headerlink" href="#What-are-the-Prioritization-Factors-that-make-these-actions-win-or-lose?" title="Link to this heading">¶</a></h3>
<p>The analysis below shows the change in the number of times an action wins when each factor is individually removed from the prioritization calculation. Unlike the Global Sensitivity Analysis above, this chart can show negative numbers. A negative value means that the selected action would win more often if that component were removed from the arbitration process. Therefore, a component with a negative value is contributing to the action’s loss.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_sensitivity</span><span class="p">(</span>
    <span class="n">limit_xaxis_range</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reference_group</span><span class="o">=</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;pyName&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">selected_action</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[13], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>plot<span style="color: rgb(98,98,98)">.</span>plot_sensitivity(
<span class="ansi-green-intense-fg ansi-bold">      2</span>     limit_xaxis_range<span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">False</span>, reference_group<span style="color: rgb(98,98,98)">=</span>pl<span style="color: rgb(98,98,98)">.</span>col(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyName</span><span style="color: rgb(175,0,0)">&#34;</span>) <span style="color: rgb(98,98,98)">==</span> selected_action
<span class="ansi-green-intense-fg ansi-bold">      3</span> )

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Why-are-the-actions-winning">
<h3>Why are the actions winning<a class="headerlink" href="#Why-are-the-actions-winning" title="Link to this heading">¶</a></h3>
<p>Here we show the distribution of the various arbitration factors of the comparison group vs the other actions that make it to arbitration for the same interactions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">warning_message</span> <span class="o">=</span> <span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_prio_factor_boxplots</span><span class="p">(</span>
    <span class="n">reference</span><span class="o">=</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;pyName&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">selected_action</span><span class="p">,</span>
    <span class="n">sample_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">if</span> <span class="n">warning_message</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">warning_message</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[14], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> fig, warning_message <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>plot<span style="color: rgb(98,98,98)">.</span>plot_prio_factor_boxplots(
<span class="ansi-green-intense-fg ansi-bold">      2</span>     reference<span style="color: rgb(98,98,98)">=</span>pl<span style="color: rgb(98,98,98)">.</span>col(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyName</span><span style="color: rgb(175,0,0)">&#34;</span>) <span style="color: rgb(98,98,98)">==</span> selected_action,
<span class="ansi-green-intense-fg ansi-bold">      3</span>     sample_size<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">10000</span>,
<span class="ansi-green-intense-fg ansi-bold">      4</span> )
<span class="ansi-green-intense-fg ansi-bold">      5</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> warning_message:
<span class="ansi-green-intense-fg ansi-bold">      6</span>     <span style="color: rgb(0,135,0)">print</span>(warning_message)

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Rank-Distribution-of-Comparison-Group">
<h3>Rank Distribution of Comparison Group<a class="headerlink" href="#Rank-Distribution-of-Comparison-Group" title="Link to this heading">¶</a></h3>
<p>Showing the distribution of the prioritization rank of the selected actions. If the rank is low, the selected actions are not (often) winning.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">decision_data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_rank_boxplot</span><span class="p">(</span>
    <span class="n">reference</span><span class="o">=</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;pyName&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">selected_action</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[15], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">decision_data</span><span style="color: rgb(98,98,98)">.</span>plot<span style="color: rgb(98,98,98)">.</span>plot_rank_boxplot(
<span class="ansi-green-intense-fg ansi-bold">      2</span>     reference<span style="color: rgb(98,98,98)">=</span>pl<span style="color: rgb(98,98,98)">.</span>col(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">pyName</span><span style="color: rgb(175,0,0)">&#34;</span>) <span style="color: rgb(98,98,98)">==</span> selected_action,
<span class="ansi-green-intense-fg ansi-bold">      3</span> )

<span class="ansi-red-fg">NameError</span>: name &#39;decision_data&#39; is not defined
</pre></div></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="thompsonsampling.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Thompson Sampling</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="Example_Data_Anonymization.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Data Anonymization</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Pegasystems
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/pegasystems/pega-datascientist-tools" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Explainability Extract Analysis</a><ul>
<li><a class="reference internal" href="#Read-the-Data-and-create-DecisionData-instance">Read the Data and create DecisionData instance</a></li>
<li><a class="reference internal" href="#Overview">Overview</a></li>
<li><a class="reference internal" href="#Action-Distribution">Action Distribution</a></li>
<li><a class="reference internal" href="#Global-Sensitivity">Global Sensitivity</a></li>
<li><a class="reference internal" href="#Wins-and-Losses-in-Arbitration">Wins and Losses in Arbitration</a><ul>
<li><a class="reference internal" href="#How-to-Interpret-the-Visual:">How to Interpret the Visual:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Personalization-Analysis">Personalization Analysis</a></li>
<li><a class="reference internal" href="#Win/Loss-Analysis">Win/Loss Analysis</a><ul>
<li><a class="reference internal" href="#Win-Analysis">Win Analysis</a></li>
<li><a class="reference internal" href="#Loss-Analysis">Loss Analysis</a></li>
<li><a class="reference internal" href="#What-are-the-Prioritization-Factors-that-make-these-actions-win-or-lose?">What are the Prioritization Factors that make these actions win or lose?</a></li>
<li><a class="reference internal" href="#Why-are-the-actions-winning">Why are the actions winning</a></li>
<li><a class="reference internal" href="#Rank-Distribution-of-Comparison-Group">Rank Distribution of Comparison Group</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=b21de401"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>